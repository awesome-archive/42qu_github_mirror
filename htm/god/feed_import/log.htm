<%inherit file="_base.htm" />
<%!
from yajl import dumps
from model.feed_import import FEED_IMPORT_STATE_REVIEWED, FEED_IMPORT_STATE_REVIEWED_WITHOUT_AUTHOR, FEED_IMPORT_STATE_REVIEWED_SYNC, FEED_IMPORT_STATE_REVIEWED_WITHOUT_AUTHOR_SYNC , FEED_IMPORT_STATE_POED, FEED_IMPORT_STATE_RM 
from zkit.time_format import friendly_time

STATE2CN = {
    FEED_IMPORT_STATE_RM : "忽略",  
    FEED_IMPORT_STATE_REVIEWED:"通过", 
    FEED_IMPORT_STATE_REVIEWED_WITHOUT_AUTHOR:"删除作者", 
    FEED_IMPORT_STATE_REVIEWED_SYNC:"同步", 
    FEED_IMPORT_STATE_REVIEWED_WITHOUT_AUTHOR_SYNC:"删除作者并同步" ,
    FEED_IMPORT_STATE_POED:"已生成" 
}

%>
%for pos, i in enumerate(feed_list,1):
<%
admin = i.admin
%>
<div>
${pos}
<a href="${admin.link}" target="_blank">${admin.name}</a>
    %for tag in i.tag_list:
${tag.id} ${tag.name}
    %endfor

%if i.state < FEED_IMPORT_STATE_POED:
    <a href="/feed_import/edit/${i.id}" target="_blank">${i.title}</a>
%else:
    ${i.title}
%endif

${STATE2CN.get(i.state,"???")}
${friendly_time(i.time)}
</div>
%endfor

${page|n}
