<%!
from model.po import PO_CN, PO_EN
from model.site_po import po_count_by_zsite_id
from operator import itemgetter
%>

<%def name="sidebar_nav()">
<%
po_count = po_count_by_zsite_id(zsite_id)
total = sum(map(itemgetter(1), po_count))
%>
<%
now = request.path.lstrip("/").split("-",1)[0]
%>
%if total:
<div id="sidebar_nav">
<a href="/" class="event_a tc${' now' if not now else ''}">主页</a>\
%for cid, count in po_count:
%if count:
<%
en = PO_EN[cid]
cn = PO_CN[cid]
%>\
<a
class="event_a\
%if now.startswith(en):
 now\
%endif
"
href="/${en}"><span class="L">${cn}</span>${count}</a>\
%endif
%endfor
</div>
%endif
</%def>
