##<%inherit file="/ctrl/_base/zsite.htm" />
##
##<%namespace file="/_util/_g1.htm" import="about_me"/>
##<%namespace file="/_util/user_index.htm" import="user_index"/>
##<%namespace file="/ctrl/zsite/po_view/index.htm" import="user_po_show"/>
<%!
from model.cid import CID_WORD, CID_NOTE, CID_QUESTION, CID_ANSWER, CID_PO, CID_PHOTO, CID_VIDEO, CID_AUDIO
from model.follow import follow_get
from model.ico import pic_url as _pic_url, ico_url_with_default
from model.fav import fav_po_count_by_user_id
%>
##<%def name="htm_head()">
##<link rel="alternate" href="/rss" type="application/rss+xml" title="${zsite.name} - 文章">
##</%def>

##<%def name="htm_title()">
##${zsite.name}
##%if motto:
## . ${motto}
##%endif
##</%def>
##
##
##
##<%
##is_owner = zsite_id == current_user_id
##%>

##%if not is_owner and current_user_id:
##<div id="nav2">
##<a    id="follow_a${zsite_id}" class="nav_a" href="javascript:follow_a(${zsite_id});void(0)">\
##      %if follow_get(current_user_id, zsite_id):
##淡忘\
##      %else:
##关注\
##      %endif
##</a><a 
##    id="nav2_touch" class="nav_a" href="javascript:nav2_touch()"
##>互动</a>
##    <div id="nav2drop" class="nav2drop">
##        <a href="/wall">留言</a>\
##        <a href="/pay">捐赠</a>\
##    </div>
##</div>
##%endif
##
##${user_index(zsite, is_owner)}
##${user_po_show()}
##
##
##<div class="zsite_block zsite_follow">\
##
##
##<%
##from model.follow import follow_count_by_to_id, follow_count_by_from_id, follow_list_show_by_from_id
##following_count = follow_count_by_from_id(zsite_id)
##follower_count = follow_count_by_to_id(zsite_id)
##follow_list = follow_list_show_by_from_id(zsite_id, 3)
##fav_count = fav_po_count_by_user_id(zsite_id)
##follow_fav_tuple = filter(lambda x: x[0], (
##    (following_count, '/following', '关注'),
##    (follower_count, '/follower', '围观'),
##    (fav_count, '/fav', '收藏'),
##))
##%>
##%if follow_list:
##<div class="zsite_ico_div">\
##%for i in follow_list:
##%if i:
##<%
##i_career = i.career
##%>
##<div class="zsite_ico c">
##    <a href="${i.link}"><img src="${i.ico96}"></a>
##    <div><a href="${i.link}" target="_blank">${i.name}</a></div>
##    <div>${i_career[0]}</div>
##    <div>${i_career[1]}</div>
##</div>
##%endif
##%endfor
##</div>\
##%endif

##% if follow_fav_tuple:
##<div class="zsite_num_div">\
##% for pos, (count, link, name) in enumerate(follow_fav_tuple):
##% if pos:
##&amp;
##<a href="${link}" class="num_normal"><span>${count}</span>${name}</a>
##% else:
##<a href="${link}" class="num"><span class="now">${count}</span><b>${name}</b></a>
##% endif
##% endfor
##</div>
##% endif
##
##</div>
##
##
##<script src="${js.ctrl_zsite|n}"></script>

<%inherit file="/ctrl/_base/zsite.htm" />

<%
from model.follow import follow_count_by_to_id, follow_count_by_from_id, follow_list_show_by_from_id
following_count = follow_count_by_from_id(zsite_id)
follower_count = follow_count_by_to_id(zsite_id)
follow_list = follow_list_show_by_from_id(zsite_id, 4)
fav_count = fav_po_count_by_user_id(zsite_id)
if any((following_count,follow_count,fav_count)):
    follow_fav_tuple=(
        (following_count, '/following', '关注'),
        (follower_count, '/follower', '粉丝'),
        (fav_count, '/fav', '收藏'),
    )
else:
    follow_fav_tuple=None   
%>


<%def name="htm_head()">
${css.ctrl_zsite_com|n}
${css.ctrl_hero|n}
${css.ctrl_tag_side|n}
${css.ctrl_hero_index|n}
<script src="${js.ctrl_hero|n}"></script>
</%def>



<div class="G">
<div class="com_wrap">
     %if motto:
    <h1>${motto}-${zsite.name} </h1>
     %else:
    <h1> ${zstie_name}</h1>
    %endif
    <div class="com_main_wrap">
    <div class="com_main">

    <%
    pic_url = _pic_url(zsite_id)
    %>
    %if pic_url:
    <img class="hero_avatar" src="${pic_url}" alt="${zsite.name}"/>
    %elif is_owner:
    <a href="/i/pic">点此上传本人头像，我们将人工审核</a>
    %endif
   
        <%
        txt = zsite.txt
        %>
        %if txt or is_owner:
        <div class="bio_quot"></div>
        %if txt:
        <div class="user_bio"><pre>${txt}</pre></div>
        %else:
        <div class="user_bio"><pre><a href="/i#txt">点击这里，补充简介</a></pre></div>
        %endif
        %endif 

         <div class="main_info">
            <div class="user_posts">
                <div class="com_title type_wrap">
                    <span class="cont_type">文章</span>
                    <span class="cont_type">回答</span>
                    <span class="cont_type">问题</span>
                    <span class="cont_type">图片</span>
                    <span class="cont_type">活动</span>
                    <span class="title_more type_more">( <a class="a_12_9" href="">全部 11</a> )</span></div>
                <div class="post_item">
                    <div class="post_title"><a href="">ZIP,一个没落天才的故事</a></div>
                    <div class="post_cont">Philip Katz，这个英年早逝惨淡一生的程序员，天才地缔造了ZIP这种压缩文件格式和Internet历史上最有名的共享软件之一——WinZIP。缔造了自由软件打败商业公司的典型成功范例。不仅如此，他的……<span class="post_reply">( <a class="a_12_9" href="">8回应</a> )</span></div>
                </div>
                <div class="post_item">
                    <div class="post_title"><a href="">人生是一场马拉松 — HP大中华区总裁孙振耀退休感言</a></div>
                    <div class="post_cont">一、关于工作与生活我有个有趣的观察，外企公司多的是25-35岁的白领，40岁以上的员工很少，二三十岁的外企员工是意气风发的，但外企公司40岁附近的经理人是很尴尬的。我见过的40岁附近的外企……<span class="post_reply">( <a class="a_12_9" href="">1回应</a> )</span></div>
                </div>
                <div class="post_item">
                    <div class="post_title"><a href="">再看三年</a></div>
                    <div class="post_cont">陈年：挺住意味着一切
你可以努力，却无法拒绝，人生哪有胜利可言，挺住意味着一切。
凡客诚品到今天也就刚刚四年多的时间，我们是和《创业家》一起上路的。昨天晚上我和牛文文社长沟通了一下今天演……<span class="post_reply">( <a class="a_12_9" href="">8回应</a> )</span></div>
                </div>
                <div class="post_item">
                    <div class="post_title"><a href="">ZIP,一个没落天才的故事</a></div>
                    <div class="post_cont">Philip Katz，这个英年早逝惨淡一生的程序员，天才地缔造了ZIP这种压缩文件格式和Internet历史上最有名的共享软件之一——WinZIP。缔造了自由软件打败商业公司的典型成功范例。不仅如此，他的……<span class="post_reply">( <a class="a_12_9" href="">8回应</a> )</span></div>
                </div>
            </div>
        </div>
    </div>

    </div>
    </div>
    <div class="com_side">
        <div id="tagbar">
            <span class="xatxt">
<a  id="follow_a${zsite_id}" class="xa" href="javascript:follow_a(${zsite_id});void(0)">\
%if follow_get(current_user_id,zsite_id):
淡忘\
%else:
关注\
%endif
</a>\
                <a class="xa" href="javascript:void(0)">忘了</a>
                <a class="xa" href="javascript:void(0)">捐赠</a>
            </span>
            <a class="xa xatagset" href="javascript:click_sets();void(0)"><span></span></a>
            <div class="pop_block">
                <a href="javascript:void(0)" class="pop_link">举报该用户</a><a href="#" class="pop_link">其他操作</a>
            </div>
        </div>
                %if follow_fav_tuple:
        <div class="user_stats"> 
            <ul id="user_stats">
                %for (count,link,name) in follow_fav_tuple:
               <li class="user_num"><a href="${link}">${count}</a><span class="num_text">${name}</span></li>
                %endfor
               ## <li class="user_num">123<span class="num_text">关注</span></li>
               ## <li class="user_num">40<span class="num_text">粉丝</span></li>
               ## <li class="user_num">39<span class="num_text">收藏</span></li>
            </ul>
        </div>
                %endif
        <div class="user_say">感谢自在侯  , 创建了一个42qu.com QQ群 , 群号码 103538647<a class="zsite_reply" href=""></a></div>
             %if follow_list:
             <div class="user_follows">
             <div class="com_title">他关注的人 · · ·<span class="title_more">( <a class="a_12_9" href="">全部 ${follow_fav_tuple[0][0]}</a> )</span></div>
                 %for i in follow_list:
                 %if i:
                 <%
                 i_career = i.career
                 %>
                <div class="com_text com_author">
                 <div class="c">
                <a class="com_avatar" href="${i.link}"><img src="${i.ico96}"></a>
             <a href="${i.link}" class="c0" target="_blank"><div>${i.name}</div><div class="mt6">${i_career[0]}</div><div class="mt6">${i_career[1]}</div></a>
                 </div>
                %endif
                %endfor
                </div>
                </div>
               %endif
        </div>

</div>
</div></div></div>


