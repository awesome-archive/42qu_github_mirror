<%inherit file="../base.htm" />
<%namespace file="/ctrl/_util/htm.htm" name="htm"/>
<%def name="head()">
<script src="${js.ctrl_site_new}"></script>
${css.ctrl_site_new|n}
</%def>
<style>
.addr_input{
width:290px;
}
.pid{
margin:15px 0 0 72px;
}
.pid select{
margin-right:8px;
}
.close_addr{
display:inline-block;
width:16px;
height:16px;
margin-left:16px;
background:url(http://s.realfex.xxx/img/gif/icons/gif/light_gray/to_size/close.gif) no-repeat 8px 8px;
padding:4px;
vertical-align:-4px;
}
.close_addr:hover{
background:url(http://s.realfex.xxx/img/gif/icons/gif/black/to_size/close.gif) no-repeat 8px 8px;
}
.addr_block{
margin-left:8px;
}
</style>
<script type="text/javascript">
$(function(){
    function empty(self){
        var val=self.val();
        return !val||$.trim(val)==''
    }
    function verify(){
        var self=$(this);
        tip(self)
    }
    function tip(self){
        var id=self[0].id;
        if(empty(self)){
            $("#errtip_"+id).remove()
            var tip=$('<div class="errtip" id="errtip_'+id+'"/>');
            self.parent().append(tip);
            tip.fadeOut(function(){tip.fadeIn()})
            tip.html("此项必填")
        }
    }
    var elem="#pic,#name,#motto,#url,#txt"
    elem=$(elem)
    elem.blur(verify).focus(function(){
        $("#errtip_"+this.id).remove()
    })
    com_new = function(){
        var i=0
        for(;i<elem.length;++i){
            var self=$(elem[i])
            if(empty(self)){
                self.focus()
                $(window).scrollTop(Math.max(self.offset().top-50,0))
                tip(self)
                return false
            }
        }
        if($('#pid')[0] && $.trim($('#pid>.addr_input').val())==''){
            $('#errtip_addr').html('请填写完整地址')
            return false
        }
        if(!$('#pid')[0] && $.trim($('.pid:first').parent().find('.addr_input').val())==''){
            $('#errtip_addr').html('请填写完整地址')
            return false
        }
        return true
    }
    $('.addr_input').live('blur',addr_blur)

    var addr_num = 2
    function addr_blur(){
        var self = $('.addr_input:last')
        if($.trim(self.val())!=''){
            $('.addr_block').append('<div><span id="pid'+addr_num+'" class="pid"></span><script>_("pid'+addr_num+'",0)<\/script><input type="text" class="input addr_input" name="address'+addr_num+'" /></div>')
            self.after('<a href="javascript:close_addr('+(addr_num-1)+');void(0)" class="close_addr"></a>')
        }
        addr_num++
    }
    close_addr = function(id){
        var fir_id = $('.pid:first').attr('id').substr(3)
        var fir = fir_id.length>0 && !$('#pid')[0]
        if(id==1){
            $('#pid').remove()
            $('.addr_input:first').remove()
            $('.close_addr:first').remove()
            $('.pid:first').parent().css('display','inline')
            $('.pid:first').css('margin-left','-4px')
        } else if(fir){
            $('#pid'+id).parent().remove()
            $('.pid:first').parent().css('display','inline')
            $('.pid:first').css('margin-left','-4px')
        } else{
            $('#pid'+id).parent().remove()
        }
    }
})
</script>



<div style="color:#ccc" class="head">
<span class="c0">创建公司</span>&gt;<span>产品演示</span>&gt;<span>发布职位</span>&gt;<span>企业介绍</span>&gt;<span>照片风景</span>&gt;<span>添加成员</span>&gt;<span>邀请评价</span>
</div>

<%htm:form class="site_new" enctype="multipart/form-data" onsubmit="return com_new()">
<div>
标识图片<input class="file" name="pic" id="pic" type="file">
${errtip.pic|n}
</div>
<div>
显示名称<input autocomplete="off" class="input" name="name" id="name" value="" type="text">
</div>
<div>
口号宣言<input class="input" autocomplete="off" name="motto" id="motto" value="" type="text">
</div>
<div>
个性域名<input autocomplete="off" class="input" name="url" value="" type="text" id="url"><span class="ltip">域名由英语字母，数字，和 - 构成，长度在5-32个字符</span>
</div>
<div>
文字介绍<textarea name="txt" class="txt" id="txt"></textarea>
</div>
<div class="address" style="margin-top:16px;">
公司地址<span class="addr_block"><script>select_pid("pid", 0)</script></span><input type="text" class="input addr_input" name="address1" />
</div>
<div class="errtip" id="errtip_addr"></div>
<div>
<span class="btnw"><button type="submit" id="submit">提交</button></span>
</div>
<input name="_xsrf" value="52aa1ffecf2f4f02a63c67237e4a57f3" type="hidden">

</%htm:form>



</div></div></div>



<div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><a class="zsite_foot" href="#B">site.42qu.com</a><a style="display: none;" href="#B" id="sB"></a></body>
</html>

