<%inherit file="/ctrl/_base/1.htm" />
<%namespace file="/ctrl/_util/htm.htm" name="htm"/>

<%htm:form enctype="multipart/form-data" action="/po/word">
<textarea name="txt"></textarea>
<button type="submit">提交</button>
</%htm:form>

<%def name="_style1(i)">
<%
feed_zsite = i.zsite
%>\
<div style="padding:10px;margin:10px;border:1px solid #eee">\
<a href="${feed_zsite.link}" target="_blank">${feed_zsite.name}</a> : \
${caller.body()}\
</div>\
</%def>

<%def name="_style1_1(i)">
<%
iid = i.id
%>
<%call expr="_style1(i)">
${caller.body()}\
<div>\
<a href="/po/${iid}" target="_blank">${i.reply_total or ''}回复</a>\

<a id="decr${iid}" class="decr" href="javascript:vote_decr(${iid});void(0)">-</a>
<span id="vote${iid}">${i.vote}</span>
<a id="incr${iid}" class="incr" href="javascript:vote_incr(${iid});void(0)">+</a>

</div>\
</%call>\
</%def>

<%def name="render_word(i)">
<%call expr="_style1_1(i)">
${i.txt}
</%call>
</%def>

<%def name="render_note(i)">
<%call expr="_style1_1(i)">
<a href="/po/${i.id}" target="_blank">${i.name}</a>
<div>${i.txt}</div>
</%call>
</%def>

<%def name="render_follow(i)">
<%call expr="_style1(i)">
关注了 <a href="${i.link}" target="_blank">${i.name}</a>
</%call>
</%def>

<%!
from model.cid import CID_WORD,CID_FOLLOW,CID_NOTE
%>
%for i in entry_list:
<%
cid = i.cid
%>
%if cid == CID_WORD:
${render_word(i)}
%elif cid == CID_FOLLOW:
${render_follow(i)}
%elif cid == CID_NOTE:
${render_note(i)}
%endif
%endfor
