<%!
from config import SITE_DOMAIN
from model.zsite import ZSITE_STATE_VERIFY
from model.zsite_link import SITE_LINK_ZSITE_DICT
%>
<%inherit file="/ctrl/_base/zsite.htm" />
<%namespace file="/ctrl/_util/htm.htm" name="htm"/>
<%
state = current_user.state
%>
<%def name="htm_head()">
${css.ctrl_site_new|n}
</%def>

<%htm:form className="site_new">
<h1>创建站点</h1>

<div>
显示名称<input class="input" type="text" name="name" value="${name or ''}">
${errtip.name|n}
</div>
<div>
描述签名<input class="input" type="text" name="motto" value="${motto or ''}">
</div>
<div>
个性域名<input class="input" type="text" name="url" value="${url or ''}"><span style="color: rgb(153, 153, 153); margin-left: 16px;"><span class="c0">my-domain</span>.${SITE_DOMAIN}</span>
${errtip.url|n}
</div>
<div>
文字介绍<textarea name="txt" style="width: 721px; border: 1px solid rgb(204, 204, 204); margin-left: 8px; margin-top: 16px; height: 150px; padding: 3px 6px; vertical-align: 1px;">${txt or ''}</textarea>
</div>
<div>
浏览权限<select class="sitetype" name="sitetype">
<option value="1">公开</option>
<option value="2">私密</option>
</select>
<span style="color:#a10;margin-left:16px">注意 : 此设置无法修改</span>
</div>

%for cid, link_name, link in link_cid:
<div>
<label for="cid${cid}">${link_name}</label>\
<input 
id="cid${cid}"
autocomplete="off"
type="text" 
class="input" name="link" value="${link}">\
<span style="color: rgb(153, 153, 153); margin-left: 16px;">可选</span>\
</div>\
<input type="hidden" value="${cid}" name="cid">
%endfor


%for i in range(4):
<%
if i<len(link_list):
    id, k, v = link_list[i]
else:
    v = ''
    if i==0:
        k = 'Blog'
    else:
        k = ''
    id = 0
%>
<div>
<input type="hidden" name="id" value="${id}">\
<input type="text" style="border:1px solid #ccc;width:62px;font-size:16px;padding:7px 0;text-align:center"
autocomplete="off" name="key" value="${k}"
>\
<input type="text" class="input" name="value" value="${v}"
autocomplete="off" name="link_name"
><span style="color: rgb(153, 153, 153); margin-left: 16px;">自定义链接</span>
</div>
%endfor

<div>
<span class="btnw"><button type="submit">确定</button></span>
</div>
</%htm:form>
