<%!
from config import SITE_DOMAIN
from config import SITE_URL
NAVURL = (
    ( '/i' , "账号"),
    ( '/cout/word' , "微博"),
    ( '/cout/note' , "文章"),
)
NAVURL_DICT = dict(NAVURL)
%>

<%namespace file="/ctrl/_util/htm.htm" name="htm"/>
<%inherit file="_base.htm" />

<%def name="nav_index(uri)">
<%
host_now = request.host==SITE_DOMAIN 
uri = request.uri
%>
<li
%if host_now and uri=='/':
class="on"\
%endif
><a href="${SITE_URL}">首页</a></li>\
%if host_now and uri in NAVURL_DICT:
<li class="on" ><a href="${uri}">${NAVURL_DICT[uri]}</a></li>\
%endif
%if zsite:
<li class="on"><a href="${zsite.link}">${zsite.name}</a></li>\
%endif
</%def>

<div id="container">
    <div id="header">
        <div id="info-box" class="wrap">${self.info_box()}</div>
        <div id="nav">
            <ul>${nav_index(request.uri)}</ul>
            <div class="ornament">
                <div class="ornament-left"></div>
                <div class="ornament-right"><div class="ornament-blank"></div></div>
            </div>
        </div>
    </div>

    <div id="main" class="wrap" style="min-height:100px;">
    ${next.body()}
    </div>
</div>

<%def name="info_box()">
%if current_user: 
<%
link = current_user.link
%>
<div style="float:right">
<a href="${link}">${current_user.name}</a>
<a href="${SITE_URL}/i">账号</a>
<a href="/news">动态</a>

<div>
发布
<a href="/cout/note">文章</a>
</div>


<a href="/logout">退出</a></div>
%else:
<%htm:form action="/login" id="register-form" className="register" >
    <div class="input-wrapper">
        <label for="mail">邮箱 ...</label>
        <input id="mail" name="mail"  value="" type="text">
    </div>
    <div class="input-wrapper">
        <label for="password">密码 ...</label>
        <input id="password" name="password" value="" type="password">

    </div>
    <button type="submit"><span>开始使用！</span></button>
</%htm:form>
%endif
<div id="logo"><a href="/"></a></div>
</%def>
