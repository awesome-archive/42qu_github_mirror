
<%!
from config import LOGO_TEXT, SITE_DOMAIN
from model.ico import ico_url_bind_with_default
from model.career import career_bind
from tornado.escape import json_encode 
%>

<%inherit file="/ctrl/_base/zsite.htm" />
<%namespace file="/ctrl/_util/htm.htm" name="htm"/>

<%def name="H()">
</%def>

<%def name="htm_head()">
<script src="${js.reg}"></script>
<script src="${js.pid}"></script>
<script src="${js.date}"></script>
${css.ctrl_auth_reg|n}
</%def>


<%def name="h_nav()"></%def>

<%htm:form id="form_reg" action="/auth/reg">
<a href="//hero.${SITE_DOMAIN}"><h1
%if not this.get_argument('next',None):
id="form_reg_h1" 
%endif
>${LOGO_TEXT|n}</h1></a>

%if zsite_list:
<div class="L">
<div id="zsite_list" class="logo_txt"></div>
</div>

<div class="L">
%else:
<div>
%endif

<p class="line">
性别
<span class="sex"><input
%if sex==1:
checked
%endif
type="radio" name="sex" id="sex1" value="1"><label for="sex1">男</label></span>
<span class="sex"><input
%if sex==2:
checked
%endif
type="radio" id="sex2" name="sex" value="2"><label for="sex2">女</label></span>
</p>
${errtip.sex|n}

<p class="line">
<label class="label_input" for="mail">邮箱</label>\
<input class="login_mail" id="mail" autocomplete="off" type="text" name="mail" value="${mail}"></p>
${errtip.mail|n}

<p class="line">
<label class="label_input" for="password">密码</label>\
<input class="login_password" id="password" autocomplete="off" type="password" name="password" value="${password}">
</p>
${errtip.password|n}


<div class="cl btns" id="form_btn">
<span id="login_link">已有账号 ? <a href="/auth/login">点此登录</a></span>
<span class="R btnw"><button type="submit" >注册</button></span>
</div>
</div>
</%htm:form>

<script id="zsite_ico" type="text/x-jquery-tmpl">
<%text>
<div class="zsite_ico c">
<a target="_blank" href="${$data[0]}">
<img src="${$data[1]}">
<div>${$data[2]}</div>
<div>${$data[3]}</div>
<div>${$data[4]}</div>
</a>
</div>
</%text>
</script>

%if zsite_list:
<%
ico_url_bind_with_default(zsite_list)
career_bind(zsite_list)
zsite_ico_list = []
for i in zsite_list:
    unit , title = i.career
    zsite_ico_list.append(
        (i.link, i.ico, i.name, unit, title)
    )
%>
<script>
zsite_ico_list(${json_encode(zsite_ico_list)|n})
</script>
%endif
